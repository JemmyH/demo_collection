#!/usr/bin/python3
# _*_ coding:utf-8 _*_
# __author__ : Jemmy
# Date : 20180802
# python_version: 3.6
import requests
import json

"""
爬取申请方网站中国大陆高校照片并保存在本地;
虽然在外表看起来使用get，但是实际上内部使用post获取数据，且数据获取途径得通过两个ajax请求，异常繁琐……
"""

# 请求头模拟浏览器。从浏览器复制过来即可
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/66.0.3359.181 Safari/537.36',
    'cookie': 'csrftoken=3l27GvF1fvXlO86nxM6OrePJmzVbqXOs; _ga=GA1.3.1089729836.1528168889; _gid=GA1.3.163964408.1528168889; banner_remove=true; _gat=1; Hm_lvt_50058a93dcd49a44afcea1dccb89a8e1=1528168889,1528250085; Hm_lpvt_50058a93dcd49a44afcea1dccb89a8e1=1528250085',
    'Referer': "https://www.applysquare.com/ranking-cn/",
    'x-csrftoken': '3l27GvF1fvXlO86nxM6OrePJmzVbqXOs',
    'accept-encoding': 'gzip, deflate, br',
    'content-length': '16604',
    'content-type': 'application/json; charset=UTF-8',
}


def get_undergraduate_data():
    error = []  # 用以保存出错的学校
    for i in range(1, 65):
        # 这一大坨不用管，直接从浏览器复制过来即可
        param = {
            "query": "\nquery ins(\n    $state: String,\n    $q: String,\n    $include_not_ranked: Boolean,\n    $field_of_study_ranking_key: String,\n    $ranking_key: String,\n    $china_degree: String,\n    $country: String,\n    $field_of_study: String,\n    $offset: Int,\n    $institute_quality:[String],\n    $public_or_private:[String],\n    $institute_type: String,\n    $china_belong_to:[String]\n) {\n    institute {\n      search(\n          state: $state,\n          q: $q,\n          include_not_ranked: $include_not_ranked,\n          field_of_study_ranking_key: $field_of_study_ranking_key,\n          ranking_key: $ranking_key,\n          china_degree: $china_degree,\n          country: $country,\n          field_of_study: $field_of_study,\n          offset: $offset,\n          size: 20,\n          institute_quality: $institute_quality,\n          public_or_private: $public_or_private,\n          institute_type: $institute_type,\n          china_belong_to: $china_belong_to\n        ) {\n        items {\n          id\n          slug\n          name\n          logo_url\n          country\n          country_data\n          state\n          state_en\n          city_data\n          city\n          ranking {\n            applysq\n            arwu\n            cn_caijinglei15\n            cn_china15\n            cn_ligonglei15\n            cn_minzulei15\n            cn_nonglinlei15\n            cn_shifanlei15\n            cn_tiyulei15\n            cn_yishulei15\n            cn_yiyaolei15\n            cn_yuyanlei15\n            cn_zhengfalei15\n            cn_zhuanke16\n            cn_zonghelei15\n            fortune500\n            qs\n            times\n            usnews\n            usnews_global\n            usnews_liberal_arts_college\n            usnews_school_business\n            usnews_school_engineering\n            usnews_school_fine_arts\n            usnews_school_law\n            usnews_school_medical_primary_care\n            usnews_school_medical_research\n\t\t  }\n\t\t  field_of_study{\n            accounting {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},actuarial_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},aerospace {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},agriculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},agriculture_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},animal_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},anthropology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},aquaculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},architectural_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},architecture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},area_studies {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},artistic_theory {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},arts_management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},atmospheric_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},basic_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biological_agricultural_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biological_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biomedical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biostatistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},business_analytics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},chemical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},chemistry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},civil_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},clinical_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},communication {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},computer_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},computer_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},criminology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},data_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},design {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},drama_and_film {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},economics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},education {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},electrical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},electronic_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},english {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},entrepreneurship {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_construction_and_equipment_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},epidemiology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},exercise_and_sport_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},finance {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},financial_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},fine_art {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},fine_arts {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},food_science_and_technology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},forestry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geography {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geophysics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geosciences {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},health {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},history {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},human_resource_management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},industrial_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},information_systems {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},international_business {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},language {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},law {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},literature {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},marketing {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},materials {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mathematics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mba {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mechanical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mineral_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},music_and_dance {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},natural_conservation_and_ecology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nuclear_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nursing {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nutrition {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},oceanography {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},operations {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},pharmacy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},philosophy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},physics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},plant_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},political_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},prataculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},psychology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_affairs {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_health {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_management_administration {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_policy_analysis {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},religion {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},social_work {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sociology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},software_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},statistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},strategy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},supply_chain_and_logistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},textile_and_light_industry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},urban_planning {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},veterinary_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},water_resources_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n          }\n          wikipedia {\n            localized_name {\n              cn\n              en\n            }\n          }\n        }\n        page_info {\n          count\n        }\n      }\n    }\n  }",
            "variables": {"country": "cn", "china_degree": "本科",
                          "offset": '{0}'.format((i - 1) * 20)}}  # 这才是嘎u年间参数，注意都是字符串
        res = requests.post(
            "https://www.applysquare.com/ajax/graphql", headers=headers, data=json.dumps(param))
        b = json.loads(res.text)['data']['institute']['search']['items']  # 将返回数据进行json格式化
        print(len(b))  # 每页获得了多少条数据
        print("page:", i)  # 第几页
        for j in range(0, len(b)):
            try:
                # urls.append("https://cdn.applysquare.net/a2/" + b[j]['logo_url'])
                # school_names.append(b[j]['wikipedia']['localized_name']['cn'])
                with open("E:\\python\\beijing_data\\icon\\school_icon\\benke\\{0}.png".format(
                        b[j]['wikipedia']['localized_name']['cn']), 'wb') as f:
                    f.write(requests.get("https://cdn.applysquare.net/a2/" + b[j]['logo_url']).content)
                    print(j)  # 保存图片
            except Exception:
                # 出现异常，说明网站上没有该学校的校徽，而是使用一个静态文件代替，我和他们的处理方式一样
                print("出现异常：", b[j]['wikipedia']['localized_name']['cn'])
                with open("E:\\python\\beijing_data\\icon\\school_icon\\benke\\{0}.png".format(
                        b[j]['wikipedia']['localized_name']['cn']), 'wb') as f:
                    f.write(requests.get('https://cdn.applysquare.net/static/img/a2/home/institute.png').content)
                    print(j)
                    print(b[j]['wikipedia']['localized_name']['cn'] + "下载完成")
                    error.append(b[j]['wikipedia']['localized_name']['cn'])
    return error  # 将没有校徽的学校返回保存

# 注释同上
def get_train_data():
    error = []
    for i in range(1, 72):
        param = {
            "query": "\nquery ins(\n    $state: String,\n    $q: String,\n    $include_not_ranked: Boolean,\n    $field_of_study_ranking_key: String,\n    $ranking_key: String,\n    $china_degree: String,\n    $country: String,\n    $field_of_study: String,\n    $offset: Int,\n    $institute_quality:[String],\n    $public_or_private:[String],\n    $institute_type: String,\n    $china_belong_to:[String]\n) {\n    institute {\n      search(\n          state: $state,\n          q: $q,\n          include_not_ranked: $include_not_ranked,\n          field_of_study_ranking_key: $field_of_study_ranking_key,\n          ranking_key: $ranking_key,\n          china_degree: $china_degree,\n          country: $country,\n          field_of_study: $field_of_study,\n          offset: $offset,\n          size: 20,\n          institute_quality: $institute_quality,\n          public_or_private: $public_or_private,\n          institute_type: $institute_type,\n          china_belong_to: $china_belong_to\n        ) {\n        items {\n          id\n          slug\n          name\n          logo_url\n          country\n          country_data\n          state\n          state_en\n          city_data\n          city\n          ranking {\n            applysq\n            arwu\n            cn_caijinglei15\n            cn_china15\n            cn_ligonglei15\n            cn_minzulei15\n            cn_nonglinlei15\n            cn_shifanlei15\n            cn_tiyulei15\n            cn_yishulei15\n            cn_yiyaolei15\n            cn_yuyanlei15\n            cn_zhengfalei15\n            cn_zhuanke16\n            cn_zonghelei15\n            fortune500\n            qs\n            times\n            usnews\n            usnews_global\n            usnews_liberal_arts_college\n            usnews_school_business\n            usnews_school_engineering\n            usnews_school_fine_arts\n            usnews_school_law\n            usnews_school_medical_primary_care\n            usnews_school_medical_research\n\t\t  }\n\t\t  field_of_study{\n            accounting {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},actuarial_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},aerospace {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},agriculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},agriculture_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},animal_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},anthropology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},aquaculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},architectural_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},architecture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},area_studies {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},artistic_theory {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},arts_management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},atmospheric_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},basic_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biological_agricultural_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biological_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biomedical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},biostatistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},business_analytics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},chemical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},chemistry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},civil_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},clinical_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},communication {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},computer_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},computer_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},criminology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},data_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},design {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},drama_and_film {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},economics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},education {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},electrical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},electronic_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},english {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},entrepreneurship {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_construction_and_equipment_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},environmental_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},epidemiology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},exercise_and_sport_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},finance {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},financial_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},fine_art {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},fine_arts {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},food_science_and_technology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},forestry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geography {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geophysics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},geosciences {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},health {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},history {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},human_resource_management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},industrial_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},information_systems {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},international_business {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},language {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},law {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},literature {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},management {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},marketing {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},materials {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mathematics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mba {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mechanical_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},mineral_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},music_and_dance {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},natural_conservation_and_ecology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nuclear_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nursing {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},nutrition {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},oceanography {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},operations {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},pharmacy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},philosophy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},physics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},plant_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},political_science {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},prataculture {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},psychology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_affairs {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_health {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_management_administration {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},public_policy_analysis {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},religion {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},social_work {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},sociology {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},software_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},statistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},strategy {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},supply_chain_and_logistics {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},textile_and_light_industry {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},urban_planning {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},veterinary_medicine {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},water_resources_engineering {\n\t\t\t\t\t\t\tranking{\n\t\t\t\t\t\t\t\tcn\n\t\t\t\t\t\t\t\tapplysq\n\t\t\t\t\t\t\t\tglobal\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n          }\n          wikipedia {\n            localized_name {\n              cn\n              en\n            }\n          }\n        }\n        page_info {\n          count\n        }\n      }\n    }\n  }",
            "variables": {"country": "cn", "china_degree": "专科", "offset": '{0}'.format((i - 1) * 20)}}
        res = requests.post(
            "https://www.applysquare.com/ajax/graphql", headers=headers, data=json.dumps(param))
        b = json.loads(res.text)['data']['institute']['search']['items']
        print(len(b))
        print("page:", i)
        for j in range(0, len(b)):
            try:
                # urls.append("https://cdn.applysquare.net/a2/" + b[j]['logo_url'])
                # school_names.append(b[j]['wikipedia']['localized_name']['cn'])
                with open("E:\\python\\beijing_data\\icon\\school_icon\\zhuanke\\{0}.png".format(
                        b[j]['wikipedia']['localized_name']['cn']), 'wb') as f:
                    f.write(requests.get("https://cdn.applysquare.net/a2/" + b[j]['logo_url']).content)
                    print(j)
            except Exception:
                print("出现异常：", b[j]['wikipedia']['localized_name']['cn'])
                with open("E:\\python\\beijing_data\\icon\\school_icon\\zhuanke\\{0}.png".format(
                        b[j]['wikipedia']['localized_name']['cn']), 'wb') as f:
                    f.write(requests.get('https://cdn.applysquare.net/static/img/a2/home/institute.png').content)
                    print(j)
                    print(b[j]['wikipedia']['localized_name']['cn'] + "下载完成")
                    error.append(b[j]['wikipedia']['localized_name']['cn'])
    return error


if __name__ == '__main__':
    error1 = get_undergraduate_data()
    # error2 = get_train_data()
    print(error1)
    # print(error2)
